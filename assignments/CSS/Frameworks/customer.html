<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="assets/boostrap/css/bootstrap.min.css" rel="stylesheet">
    <style>

        body>main>section:nth-child(2)>div:nth-child(1){
            width: 100px;
        }

        .nav-item{
            font-weight: bold;
            font-size: 20px;
        }

        body>header>nav>div>a{
            color: yellow !important;
        }

        body>header>nav>div>div>ul>li>a{
            font-size: 30px !important;
        }

        .navbar-brand{
            /*font-weight: bold;*/
            font-size: 30px;
            /*font-family: 'Lobster', cursive;*/
        }
        .container-fluid{
            padding-left: 0;
            padding-right: 0;
        }
    </style>
</head>
<body>
<header>
    <nav class="navbar navbar-expand-lg  navbar-dark bg-info">
        <div class="container-fluid">
            <a class="navbar-brand display-6" style="margin-left: 10px" href="#">NEON WINE STORE</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" style="margin-left: 20px" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link display-6 " aria-current="page" href="index.html"  >Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link display-6 " href="orders.html" >Orders</a>

                    <li class="nav-item">
                        <a class="nav-link display-6 " href="item.html"  >Items</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active display-6 " href="customer.html"  >Customers</a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>

</header>
<main>
    <section class="container-fluid " id="customerForm">

        <section class="row mt-3  justify-content-around" style="margin-right: 0; margin-left: 0">
            <div class="col-12 col-md-4">
                <div class="shadow-sm pt-3 pb-5 px-3 py-3 mt-2 bg-info bg-opacity-25 rounded-3">
                    <h1 class="h1 mb-3 display-6 ">Manage Customer</h1>
                    <div class="mb-3">
                        <label class="form-label" for="srcCusID">Search Customer</label>
                        <input class="form-control" id="srcCusID" placeholder="Customer ID" type="text">
                    </div>
                    <button id="btnAddCustomer" type="button" class="btn btn-success">Add</button>
                    <button id="btnDeleteCustomer" type="button" class="btn btn-danger">Delete</button>
                    <button id="btnUpdateCustomer" type="button" class="btn btn-warning">Update</button>
                </div>
            </div>
            <div class="col-12 col-md-5">
                <div class="mb-3">
                    <label class="form-label " for="cusID">Customer ID</label>
                    <input class="form-control " id="cusID" placeholder="Customer ID" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="cusName">Customer Name</label>
                    <input class="form-control" id="cusName" placeholder="Customer Name" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="cusAddress">Customer Address</label>
                    <input class="form-control" id="cusAddress" placeholder="Customer Address" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="cusSalary">Salary</label>
                    <input class="form-control" id="cusSalary" placeholder="Salary" type="number">
                </div>
            </div>
        </section>

        <!--        waguwa udata pllehata yawanne meken-->
        <section class="row justify-content-center w-100">
            <div class="col" style="padding-left: 2rem">
                <table id="tblCustomer" class="table table-hover container-fluid">
                    <thead class="bg-info text-center">
                    <tr>
                        <th>Customer ID</th>
                        <th>Customer Name</th>
                        <th>Customer Address</th>
                        <th>Contact</th>
                    </tr>
                    </thead>
                    <tbody id="tblBody">

                    </tbody>
                </table>
            </div>
        </section>
    </section>
</main>


<!--================================================js============================================================-->

<script src="assets/js/jquery-3.6.1.min.js"></script>
<script>

    var s1=new Array();
    var customerObj
    let upCheck;
    let idGenerater=1;

    $('#cusID').val("C00-"+idGenerater);

    $('#btnAddCustomer').click(function (){


        let cusId = $('#cusID').val();
        let cusName = $('#cusName').val();
        let cusAddress = $('#cusAddress').val();
        let cusSalary = $('#cusSalary').val();

        customerObj= {
            cI: cusId,
            cN: cusName,
            cA: cusAddress,
            cS: cusSalary
        }

        s1.push(customerObj);

        save();
        clearText();
        clickFind();
        doubleClick();
        idGenerater++;
        $('#cusID').val("C00-"+idGenerater);

    })

    function save(){
        $("#tblBody").empty();
        for(var l of s1){
            var row="<tr><th >"+l.cI+"</th><th >"+l.cN+"</th><th >"+l.cA+"</th><th>"+l.cS+"</th></tr>"
            $('#tblCustomer').append(row);
        }
    }





    function clearText(){
        $('#cusName').val("");
        $('#cusAddress').val("");
        $('#cusSalary').val("");
    }





        $('#srcCusID').keyup(function (e){
            let clickKey=e.which;
            if(clickKey === 13){
                for (var s of s1){
                    if(s.cI===$('#srcCusID').val()){
                        $('#cusID').val(s.cI);
                        $('#cusName').val(s.cN);
                        $('#cusAddress').val(s.cA);
                        $('#cusSalary').val(s.cS);

                    }
                }
            }
        })




        function clickFind(){
            $('#tblBody>tr').click(function(){
                $('#cusID').val($(this,'#tblBody>tr').children(':nth-child(1)').text());
                $('#cusName').val($(this,'#tblBody>tr').children(':nth-child(2)').text());
                $('#cusAddress').val($(this,'#tblBody>tr').children(':nth-child(3)').text());
                $('#cusSalary').val($(this,'#tblBody>tr').children(':nth-child(4)').text());

            })
        }


        $('#btnUpdateCustomer').click(function (){
            var updateId=$('#cusID').val();
            var updateName=$('#cusName').val();
            var updateAddress=$('#cusAddress').val();
            var updateSalary=$('#cusSalary').val();

            for (cu=0;cu<s1.length;cu++){
                let checkUpdate=s1[cu];
                if (checkUpdate.cI === updateId){

                    checkUpdate.cI=updateId;
                    checkUpdate.cN=updateName;
                    checkUpdate.cA=updateAddress;
                    checkUpdate.cS=updateSalary;

                    $('#tblBody').empty();


                    for(var l of s1){
                        var row="<tr><th >"+l.cI+"</th><th >"+l.cN+"</th><th >"+l.cA+"</th><th>"+l.cS+"</th></tr>"
                        $('#tblCustomer').append(row);
                    }

                    $('#cusID').val("");
                    $('#cusName').val("");
                    $('#cusAddress').val("");
                    $('#cusSalary').val("");

                    $('#tblBody>tr').click(function(){
                        $('#cusID').val($(this,'#tblBody>tr').children(':nth-child(1)').text());
                        $('#cusName').val($(this,'#tblBody>tr').children(':nth-child(2)').text());
                        $('#cusAddress').val($(this,'#tblBody>tr').children(':nth-child(3)').text());
                        $('#cusSalary').val($(this,'#tblBody>tr').children(':nth-child(4)').text());
                    })

                }

                $('#cusID').val("C00-"+idGenerater);
                $('#cusName').focus();

            }


        })





        function doubleClick(){
        $('#tblBody>tr').dblclick(function (){
            clearText();
            // $('#cusID').val($(this).remove());
            $(this).remove();
        })
        }

    // --------------------------enter eka gahuwama yatata yana seen eka--------------------------------------
    $("#cusID,#cusName,#cusAddress,#cusSalary").keydown(function (event){
        if(event.which === 9){
            event.preventDefault();
        }
    })

    $('#cusID').keyup(function (event){
        let catchEvent=event.which;
        if(catchEvent === 13){
            $('#cusName').focus();
        }
    })

    $('#cusName').keyup(function (event){
        let catchEvent=event.which;
        if(catchEvent === 13){
            $('#cusAddress').focus();
        }
    })

    $('#cusAddress').keyup(function (event){
        let catchEvent=event.which;
        if(catchEvent === 13){
            $('#cusSalary').focus();
        }
    })

    $('#cusSalary').keyup(function (event){
        let catchEvent=event.which;
        if(catchEvent === 13){
            // ------------------------------------------------------------------------------
            let cusId = $('#cusID').val();
            let cusName = $('#cusName').val();
            let cusAddress = $('#cusAddress').val();
            let cusSalary = $('#cusSalary').val();

            customerObj= {
                cI: cusId,
                cN: cusName,
                cA: cusAddress,
                cS: cusSalary
            }

            s1.push(customerObj);


            // ------------------------------------------------------------------------------

            var rowEnter="<tr><th >"+$('#cusID').val()+"</th><th >"+$('#cusName').val()+"</th><th >"+$('#cusAddress').val()+"</th><th>"+$('#cusSalary').val()+"</th></tr>"
            $('#tblCustomer').append(rowEnter);
            $('#cusID').val("");
            $('#cusName').val("");
            $('#cusAddress').val("");
            $('#cusSalary').val("");
            $('#cusName').focus();
            clickFind();
            doubleClick();
            idGenerater++;
            $('#cusID').val("C00-"+idGenerater);
        }
    })

    // ===============================Delete Customer===================================================
    $('#btnDeleteCustomer').click(function (){
        var masseage=confirm('are you wont delete this customer');
        if (masseage===true){
            for (k=0;k<s1.length;k++){
                let deleteCheck=s1[k];
                if ($('#cusID').val() === deleteCheck.cI){
                    s1.splice(k,1);
                    $('#tblBody').empty();


                    for(var l of s1){
                        var row="<tr><th >"+l.cI+"</th><th >"+l.cN+"</th><th >"+l.cA+"</th><th>"+l.cS+"</th></tr>"
                        $('#tblCustomer').append(row);
                    }

                    $('#cusID').val("");
                    $('#cusName').val("");
                    $('#cusAddress').val("");
                    $('#cusSalary').val("");

                    $('#tblBody>tr').click(function(){
                        $('#cusID').val($(this,'#tblBody>tr').children(':nth-child(1)').text());
                        $('#cusName').val($(this,'#tblBody>tr').children(':nth-child(2)').text());
                        $('#cusAddress').val($(this,'#tblBody>tr').children(':nth-child(3)').text());
                        $('#cusSalary').val($(this,'#tblBody>tr').children(':nth-child(4)').text());
                    })
                }
            }
        }


    })









</script>


</body>
</html>