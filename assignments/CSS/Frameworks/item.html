<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Store</title>
    <link rel="stylesheet" href="assets/style/normalize.css">
    <meta name="keyword" content="bootstrap,css framework">
    <meta name="description" content="bootstrap">
    <meta name="viewport" content="width=device_width initial-scale=1">
    <meta name="theme-color" content="white">
    <link href="assets/boostrap/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .nav-item{
            font-weight: bold;
            font-size: 20px;
        }

        body>header>nav>div>a{
            color: yellow !important;
        }
        body>header>nav>div>div>ul>li>a{
            font-size: 30px !important;
        }
        .navbar-brand{
            /*font-weight: bold;*/
            font-size: 30px;
            /*font-family: 'Lobster', cursive;*/
        }
        .container-fluid{
            padding-left: 0;
            padding-right: 0;
        }
    </style>
</head>
<body>
<header>

    <nav class="navbar navbar-expand-lg  navbar-dark bg-info">
        <div class="container-fluid">
            <a class="navbar-brand display-6 " style="margin-left: 10px" href="#">NEON WINE STORE</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" style="margin-left: 20px" id="navbarSupportedContent">
                <ul  class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link display-6 " aria-current="page" id="linkHome" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link display-6 " id="linkOrder" href="orders.html" >Orders</a>

                    <li class="nav-item">
                        <a class="nav-link active display-6 " id="linkItem" href="item.html" >Items</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link display-6 " id="linkCustomer" href="customer.html" >Customers</a>
                    </li>
                </ul>

            </div>
        </div>
    </nav>
</header>
<main>
    <section class="container-fluid mt-3 " id="itemForm">

        <section class="row mt-3 justify-content-around" style="margin-left: 0; margin-right: 0">
            <div class="col-12 col-md-4">
                <div class="shadow-sm pt-3 pb-5 px-3 py-3 mt-2 bg-info bg-opacity-25 rounded-3">
                    <h1 class="h1 mb-3 display-6">Manage Item</h1>
                    <div class="mb-3">
                        <label class="form-label" for="srcItemID">Search Item</label>
                        <input class="form-control" id="srcItemID" placeholder="Item ID" type="text">
                    </div>
                    <button id="btnAddItem" type="button" class="btn btn-success">Add</button>
                    <button id="btnDeleteItem" type="button" class="btn btn-danger">Delete</button>
                    <button id="btnUpdateItem" type="button" class="btn btn-warning">Update</button>
                </div>
            </div>
            <div class="col-12 col-md-5">
                <div class="mb-3">
                    <label class="form-label " for="itemId">Item Id</label>
                    <input class="form-control " id="itemId" placeholder="Item ID" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="ItemName">Item Name</label>
                    <input class="form-control" id="ItemName" placeholder="Item Name" type="text">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="itemQty">Item Qty</label>
                    <input class="form-control" id="itemQty" placeholder="Item Qty" type="number">
                </div>
                <div class="mb-3">
                    <label class="form-label" for="unitPrice">Unit Price</label>
                    <input class="form-control" id="unitPrice" placeholder="Unit PriCe" type="number">
                </div>
            </div>
        </section>
        <section class="row justify-content-center w-100">
            <div class="col"  style="padding-left: 2rem">
                <table id="tblItem" class="table table-hover container-fluid">
                    <thead class="bg-info text-center">
                    <tr>
                        <th>Item ID</th>
                        <th>Item Name</th>
                        <th>Item Qty</th>
                        <th>Unit Price</th>
                    </tr>
                    </thead>
                    <tbody id="itemTblBody">

                    </tbody>
                </table>
            </div>
        </section>
    </section>
</main>

<script src="assets/boostrap/js/bootstrap.bundle.min.js"></script>

<!--================================================js============================================================-->

<script src="assets/js/jquery-3.6.1.min.js"></script>
<script>

    var item1=new Array();
    var itemObj;
    let itemIdGenerater=1;

    $('#itemId').val("I00-"+itemIdGenerater);

    $('#btnAddItem').click(function (){

        $("#itemTblBody").empty();

        let itemId = $('#itemId').val();
        let itemName = $('#ItemName').val();
        let qty = $('#itemQty').val();
        let unitPrice = $('#unitPrice').val();

         itemObj= {
            itemI: itemId,
            itemN: itemName,
            itemQ: qty,
            uP: unitPrice
        }

        item1.push(itemObj);

        for(var l of item1){
            var row="<tr><th >"+l.itemI+"</th><th >"+l.itemN+"</th><th >"+l.itemQ+"</th><th>"+l.uP+"</th></tr>"
            $('#tblItem').append(row);
        }


        clearItemText();
        clickItemFind();
        itemDoubleClick();
        itemIdGenerater++;
        $('#itemId').val("I00-"+itemIdGenerater);

    })


    $('#srcItemID').keyup(function (e2){
        let clickKey2=e2.which;
        if(clickKey2 === 13){
            for (var s2 of item1){
                if(s2.itemI===$('#srcItemID').val()){
                    $('#itemId').val(s2.itemI);
                    $('#ItemName').val(s2.itemN);
                    $('#itemQty').val(s2.itemQ);
                    $('#unitPrice').val(s2.uP);

                }
            }
        }
    })



    function clearItemText(){
        // $('#itemId').val("");
        $('#ItemName').val("");
        $('#itemQty').val("");
        $('#unitPrice').val("");
    }

    function clickItemFind(){
        $('#itemTblBody>tr').click(function(){
            $('#itemId').val($(this,'#itemTblBody>tr').children(':nth-child(1)').text());
            $('#ItemName').val($(this,'#itemTblBody>tr').children(':nth-child(2)').text());
            $('#itemQty').val($(this,'#itemTblBody>tr').children(':nth-child(3)').text());
            $('#unitPrice').val($(this,'#itemTblBody>tr').children(':nth-child(4)').text());
        })
    }

    function itemDoubleClick(){
        $('#itemTblBody>tr').dblclick(function (){
            clearItemText();
            // $('#itemId').val($(this).remove());
            $(this).remove();
        })
    }


    // --------------------------enter eka gahuwama yatata yana seen eka--------------------------------------
    $("#itemId,#ItemName,#itemQty,#unitPrice").keydown(function (event){
        if(event.which === 9){
            event.preventDefault();
        }
    })

    $('#itemId').keyup(function (event){
        let catchEvent=event.which;
        console.log(catchEvent);
        if(catchEvent === 13){
            $('#ItemName').focus();
        }
    })

    $('#ItemName').keyup(function (event){
        let catchEvent=event.which;
        console.log(catchEvent);
        if(catchEvent === 13){
            $('#itemQty').focus();
        }
    })

    $('#itemQty').keyup(function (event){
        let catchEvent=event.which;
        console.log(catchEvent);
        if(catchEvent === 13){
            $('#unitPrice').focus();
        }
    })

    $('#unitPrice').keyup(function (event){
        let catchEvent=event.which;
        console.log(catchEvent);
        if(catchEvent === 13){

            let itemId = $('#itemId').val();
            let itemName = $('#ItemName').val();
            let qty = $('#itemQty').val();
            let unitPrice = $('#unitPrice').val();

            itemObj= {
                itemI: itemId,
                itemN: itemName,
                itemQ: qty,
                uP: unitPrice
            }

            item1.push(itemObj);

            var rowEnter="<tr><th >"+$('#itemId').val()+"</th><th >"+$('#ItemName').val()+"</th><th >"+$('#itemQty').val()+"</th><th>"+$('#unitPrice').val()+"</th></tr>"
            $('#tblItem').append(rowEnter);
            $('#itemId').val("");
            $('#ItemName').val("");
            $('#itemQty').val("");
            $('#unitPrice').val("");
            $('#itemId').focus();
            clickItemFind();
            itemDoubleClick();
            itemIdGenerater++;
            $('#itemId').val("I00-"+itemIdGenerater);
        }
    })

    // ===============================Delete Item===================================================
    $('#btnDeleteItem').click(function (){
        var masseageItemDelete=confirm('are you wont delete this Item');
        if (masseageItemDelete===true){
            for (k=0;k<item1.length;k++){
                let deleteCheck2=item1[k];
                if ($('#itemId').val() === deleteCheck2.itemI){
                    item1.splice(k,1);
                    $('#itemTblBody').empty();


                    for(var l of item1){
                        var row="<tr><th >"+l.itemI+"</th><th >"+l.itemN+"</th><th >"+l.itemQ+"</th><th>"+l.uP+"</th></tr>"
                        $('#itemTblBody').append(row);
                    }

                    $('#itemId').val("");
                    $('#ItemName').val("");
                    $('#itemQty').val("");
                    $('#unitPrice').val("");

                    $('#itemTblBody>tr').click(function(){
                        $('#itemId').val($(this,'#itemTblBody>tr').children(':nth-child(1)').text());
                        $('#ItemName').val($(this,'#itemTblBody>tr').children(':nth-child(2)').text());
                        $('#itemQty').val($(this,'#itemTblBody>tr').children(':nth-child(3)').text());
                        $('#unitPrice').val($(this,'#itemTblBody>tr').children(':nth-child(4)').text());
                    })
                }
            }
        }


    })


    $('#btnUpdateItem').click(function (){
        var updateItemId=$('#itemId').val();
        var updateItemName=$('#ItemName').val();
        var updateItemQty=$('#itemQty').val();
        var updateUnitPrice=$('#unitPrice').val();

        for (cu=0;cu<item1.length;cu++){
            let checkUpdate=item1[cu];
            if (checkUpdate.itemI === updateItemId){

                checkUpdate.itemI=updateItemId;
                checkUpdate.itemN=updateItemName;
                checkUpdate.itemQ=updateItemQty;
                checkUpdate.uP=updateUnitPrice;

                $('#itemTblBody').empty();


                for(var l of item1){
                    var row="<tr><th >"+l.itemI+"</th><th >"+l.itemN+"</th><th >"+l.itemQ+"</th><th>"+l.uP+"</th></tr>"
                    $('#itemTblBody').append(row);
                }

                $('#itemId').val("");
                $('#ItemName').val("");
                $('#itemQty').val("");
                $('#unitPrice').val("");

                $('#itemTblBody>tr').click(function(){
                    $('#itemId').val($(this,'#itemTblBody>tr').children(':nth-child(1)').text());
                    $('#ItemName').val($(this,'#itemTblBody>tr').children(':nth-child(2)').text());
                    $('#itemQty').val($(this,'#itemTblBody>tr').children(':nth-child(3)').text());
                    $('#unitPrice').val($(this,'#itemTblBody>tr').children(':nth-child(4)').text());
                })

            }

            $('#itemId').val("I00-"+itemIdGenerater);
            $('#ItemName').focus();

        }


    })



</script>

</body>
</html>